<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="ÂÖ≥‰∫éÁ®ãÂ∫è‰∏éËÆæËÆ°„ÄÅÈªëÂÆ¢‰∏éÁîªÂÆ∂ | ÈªÑÁéÑÔºåWeb & Mobile LoverÔºåSoftware EngineerÔºåUX Designer | ËøôÈáåÊòØ @HuxÈªÑÁéÑ ÁöÑ‰∏™‰∫∫ÂçöÂÆ¢Ôºå‰∏é‰Ω†‰∏ÄËµ∑ÂèëÁé∞Êõ¥Â§ßÁöÑ‰∏ñÁïå„ÄÇ">
    <meta name="keywords"  content="ÈªÑÁéÑ, HuxÈªÑÁéÑ, Hux, È¨ºÊ†à, huxpro, @huxpro, ÈªÑÁéÑÁöÑÂçöÂÆ¢, Hux Blog, ÂçöÂÆ¢, ‰∏™‰∫∫ÁΩëÁ´ô, ‰∫íËÅîÁΩë, Web, JavaScript, ÂâçÁ´Ø, ËÆæËÆ°">
    <meta name="theme-color" content="#000000">
    
    <!-- Open Graph -->
    <meta property="og:title" content="„ÄåSF-LC„Äç8 Maps - lxdÁöÑÂçöÂÆ¢ | lxd Blog">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="
  useful as env


">
    
    <meta property="article:published_time" content="2019-01-08T00:00:00Z">
    
    
    <meta property="article:author" content="Hux">
    
    
    <meta property="article:tag" content="LF (ÈÄªËæëÂü∫Á°Ä)">
    
    <meta property="article:tag" content="SF (ËΩØ‰ª∂Âü∫Á°Ä)">
    
    <meta property="article:tag" content="Coq">
    
    <meta property="article:tag" content="Á¨îËÆ∞">
    
    
    <meta property="og:image" content="http://localhost:4000/img/avatar-hux-ny.jpg">
    <meta property="og:url" content="http://localhost:4000/2019/01/08/sf-lf-08-map/">
    <meta property="og:site_name" content="lxdÁöÑÂçöÂÆ¢ | lxd Blog">
    
    <title>„ÄåSF-LC„Äç8 Maps - lxdÁöÑÂçöÂÆ¢ | lxd Blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="http://localhost:4000/2019/01/08/sf-lf-08-map/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

<nav class="navbar navbar-default navbar-custom navbar-fixed-top invert">

    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">lxd's Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    
                    
                    
                    <li>
                        <a href="/about/">About</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="/archive/">Archive</a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/home-bg.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/home-bg.jpg');
        background: ;
    }

    
</style>

<header class="intro-header style-text" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=LF+%28%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%29" title="LF (ÈÄªËæëÂü∫Á°Ä)">LF (ÈÄªËæëÂü∫Á°Ä)</a>
                        
                        <a class="tag" href="/archive/?tag=SF+%28%E8%BD%AF%E4%BB%B6%E5%9F%BA%E7%A1%80%29" title="SF (ËΩØ‰ª∂Âü∫Á°Ä)">SF (ËΩØ‰ª∂Âü∫Á°Ä)</a>
                        
                        <a class="tag" href="/archive/?tag=Coq" title="Coq">Coq</a>
                        
                        <a class="tag" href="/archive/?tag=%E7%AC%94%E8%AE%B0" title="Á¨îËÆ∞">Á¨îËÆ∞</a>
                        
                    </div>
                    <h1>„ÄåSF-LC„Äç8 Maps</h1>
                    
                    <h2 class="subheading">Logical Foundations - Total and Partial Maps</h2>
                    <span class="meta">Posted by Hux on January 8, 2019</span>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

				<blockquote>
  <p>useful as env</p>
</blockquote>

<p>Map == Dictionary</p>
<ul>
  <li>building data structure.</li>
  <li>use of reflection to streamline proofs.</li>
</ul>

<p>Two flavors of maps:</p>
<ol>
  <li><em>total</em>   maps, return <em>default</em> when lookup fails</li>
  <li><em>partial</em> maps, return <code class="highlighter-rouge">option</code> to indicate success/failure, using <code class="highlighter-rouge">None</code> as the default.</li>
</ol>

<h2 id="the-coq-standard-lib">The Coq Standard Lib</h2>

<p>From now on, importing from std lib. (but should not notice much difference)</p>

<div class="language-coq highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="no">From</span><span class="w"> </span><span class="no">Coq</span><span class="w"> </span><span class="k">Require</span><span class="w"> </span><span class="k">Import</span><span class="w"> </span><span class="nn">Arith</span><span class="p">.</span><span class="no">Arith</span><span class="pi">.</span><span class="w">
</span><span class="no">From</span><span class="w"> </span><span class="no">Coq</span><span class="w"> </span><span class="k">Require</span><span class="w"> </span><span class="k">Import</span><span class="w"> </span><span class="nn">Bool</span><span class="p">.</span><span class="no">Bool</span><span class="pi">.</span><span class="w">
</span><span class="k">Require</span><span class="w"> </span><span class="k">Export</span><span class="w"> </span><span class="nn">Coq</span><span class="p">.</span><span class="nn">Strings</span><span class="p">.</span><span class="no">String</span><span class="pi">.</span><span class="w">
</span><span class="no">From</span><span class="w"> </span><span class="no">Coq</span><span class="w"> </span><span class="k">Require</span><span class="w"> </span><span class="k">Import</span><span class="w"> </span><span class="nn">Logic</span><span class="p">.</span><span class="no">FunctionalExtensionality</span><span class="pi">.</span><span class="w">
</span><span class="no">From</span><span class="w"> </span><span class="no">Coq</span><span class="w"> </span><span class="k">Require</span><span class="w"> </span><span class="k">Import</span><span class="w"> </span><span class="nn">Lists</span><span class="p">.</span><span class="no">List</span><span class="pi">.</span><span class="w">
</span><span class="k">Import</span><span class="w"> </span><span class="no">ListNotations</span><span class="pi">.</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>TODO: what‚Äôs the differences above? 
Answered in Coq Intensive:</p>
<ul>
  <li><code class="highlighter-rouge">Require</code> give access but need to use qualified name</li>
  <li><code class="highlighter-rouge">Import</code>  no need to use qualified name</li>
  <li><code class="highlighter-rouge">Export</code>  module importing me no need to use qualified name as well</li>
</ul>

<p><code class="highlighter-rouge">String</code> in Coq is <code class="highlighter-rouge">list</code> of <code class="highlighter-rouge">Char</code> and <code class="highlighter-rouge">Char</code> is record of 8 <code class="highlighter-rouge">Bool</code>‚Ä¶</p>

<h2 id="identifiers">Identifiers</h2>

<blockquote>
  <p>we need a type for the <em>keys</em> that we use to index into our maps.</p>
</blockquote>

<p>In <code class="highlighter-rouge">Lists.v</code> (Partial Maps):</p>

<div class="language-coq highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">Inductive</span><span class="w"> </span><span class="no">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kr">Type</span><span class="w"> </span><span class="p">:=</span><span class="w"> 
  </span><span class="o">|</span><span class="w"> </span><span class="no">Id</span><span class="w"> </span><span class="o">(</span><span class="no">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">nat</span><span class="o">).</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>From now on we will use the <code class="highlighter-rouge">string</code> from Coq‚Äôs std lib:</p>

<div class="language-coq highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">Definition</span><span class="w"> </span><span class="no">eqb_string</span><span class="w"> </span><span class="o">(</span><span class="no">x</span><span class="w"> </span><span class="no">y</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">string</span><span class="o">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">bool</span><span class="w"> </span><span class="p">:=</span><span class="w">
  </span><span class="kr">if</span><span class="w"> </span><span class="no">string_dec</span><span class="w"> </span><span class="no">x</span><span class="w"> </span><span class="no">y</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="no">false</span><span class="pi">.</span><span class="w">

</span><span class="k">Check</span><span class="w"> </span><span class="no">string_dec</span><span class="p">:</span><span class="w"> </span><span class="c">(* ===&gt; *)</span><span class="w">
     </span><span class="p">:</span><span class="w"> </span><span class="kr">forall</span><span class="w"> </span><span class="no">s1</span><span class="w"> </span><span class="no">s2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">string</span><span class="o">,</span><span class="w"> </span><span class="o">{</span><span class="no">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">s2</span><span class="o">}</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">{</span><span class="no">s1</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="no">s2</span><span class="o">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>The equality check fn for <code class="highlighter-rouge">string</code> from stdlib is <code class="highlighter-rouge">string_des</code>, which returns a <code class="highlighter-rouge">sumbool</code> type, i.e. <code class="highlighter-rouge">{x=y} + {x‚â†y}</code>.</p>
<blockquote>
  <p>which can be thought of as an <strong>‚Äúevidence-carrying boolean‚Äù</strong>. 
Formally, an element of <code class="highlighter-rouge">sumbool</code> is either or</p>
  <ul>
    <li>a proof that two things are equal</li>
    <li>a proof that they are unequal, 
together with a tag indicating which.</li>
  </ul>
</blockquote>

<p>Some properties:</p>

<div class="language-coq highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c">(* reflexive relation *)</span><span class="w">
</span><span class="k">Theorem</span><span class="w"> </span><span class="no">eqb_string_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="err">‚àÄ</span><span class="no">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">string</span><span class="o">,</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">eqb_string</span><span class="w"> </span><span class="no">s</span><span class="w"> </span><span class="no">s</span><span class="pi">.</span><span class="w">

</span><span class="c">(* functional extensionality *)</span><span class="w">
</span><span class="k">Theorem</span><span class="w"> </span><span class="no">eqb_string_true_iff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="err">‚àÄ</span><span class="no">x</span><span class="w"> </span><span class="no">y</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">string</span><span class="o">,</span><span class="w"> </span><span class="no">eqb_string</span><span class="w"> </span><span class="no">x</span><span class="w"> </span><span class="no">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="err">‚Üî</span><span class="w"> </span><span class="no">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">y</span><span class="pi">.</span><span class="w">
</span><span class="k">Theorem</span><span class="w"> </span><span class="no">eqb_string_false_iff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="err">‚àÄ</span><span class="no">x</span><span class="w"> </span><span class="no">y</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">string</span><span class="o">,</span><span class="w"> </span><span class="no">eqb_string</span><span class="w"> </span><span class="no">x</span><span class="w"> </span><span class="no">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="err">‚Üî</span><span class="w"> </span><span class="no">x</span><span class="w"> </span><span class="err">‚â†</span><span class="w"> </span><span class="no">y</span><span class="pi">.</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="total-maps">Total Maps</h2>

<blockquote>
  <p>use <em>functions</em>, rather than lists of key-value pairs, to build maps. 
The advantage of this representation is that it offers a more <em>extensional</em> view of maps. Â§ñÂª∂ÊÄß</p>
</blockquote>

<blockquote>
  <p>(where two maps that respond to queries in the same way will be represented as literally the same thing rather than just ‚Äúequivalent‚Äù data structures. This, in turn, simplifies proofs that use maps.)</p>
</blockquote>

<div class="language-coq highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">Definition</span><span class="w"> </span><span class="no">total_map</span><span class="w"> </span><span class="o">(</span><span class="no">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kr">Type</span><span class="o">)</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="no">string</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="no">A</span><span class="pi">.</span><span class="w">

</span><span class="c">(* empty take a default value *)</span><span class="w">
</span><span class="k">Definition</span><span class="w"> </span><span class="no">t_empty</span><span class="w"> </span><span class="o">{</span><span class="no">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kr">Type</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="no">v</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">A</span><span class="o">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">total_map</span><span class="w"> </span><span class="no">A</span><span class="w"> </span><span class="p">:=</span><span class="w">
  </span><span class="o">(</span><span class="kr">fun</span><span class="w"> </span><span class="p">_</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="no">v</span><span class="o">).</span><span class="w">

</span><span class="c">(* update take a key value pair *)</span><span class="w">
</span><span class="k">Definition</span><span class="w"> </span><span class="no">t_update</span><span class="w"> </span><span class="o">{</span><span class="no">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kr">Type</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="no">m</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">total_map</span><span class="w"> </span><span class="no">A</span><span class="o">)</span><span class="w">
                    </span><span class="o">(</span><span class="no">x</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">string</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="no">v</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">A</span><span class="o">)</span><span class="w"> </span><span class="c">(* : total_map A *)</span><span class="w"> </span><span class="p">:=</span><span class="w">
  </span><span class="kr">fun</span><span class="w"> </span><span class="no">x'</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="no">eqb_string</span><span class="w"> </span><span class="no">x</span><span class="w"> </span><span class="no">x'</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="no">v</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="no">m</span><span class="w"> </span><span class="no">x'</span><span class="pi">.</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>Where is the data stored? <em>Closure</em>!</p>

<h3 id="my-reviews-on-api-style-of-ml">My Reviews on API style of ML</h3>

<div class="language-coq highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">Definition</span><span class="w"> </span><span class="no">examplemap</span><span class="w"> </span><span class="p">:=</span><span class="w">
  </span><span class="no">t_update</span><span class="w"> </span><span class="o">(</span><span class="no">t_update</span><span class="w"> </span><span class="o">(</span><span class="no">t_empty</span><span class="w"> </span><span class="no">false</span><span class="o">)</span><span class="w"> </span><span class="s2">"foo"</span><span class="w"> </span><span class="no">true</span><span class="o">)</span><span class="w">
           </span><span class="s2">"bar"</span><span class="w"> </span><span class="no">true</span><span class="pi">.</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>since <code class="highlighter-rouge">t_update</code> is defined as so called ‚Äút-first‚Äù style. 
Reason/BuckleScript and OCaml stdlib uses this style as well:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">examplemap</span> <span class="o">=</span> 
  <span class="nx">t_empty</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
  <span class="o">|</span><span class="p">.</span> <span class="nx">t_update</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>         <span class="cm">/* fast pipe */</span>
  <span class="o">|</span><span class="p">.</span> <span class="nx">t_update</span><span class="p">(</span><span class="s2">"bar"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> 
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-ocaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">val</span> <span class="n">add</span> <span class="o">:</span> <span class="n">key</span> <span class="o">-&gt;</span> <span class="k">'</span><span class="n">a</span> <span class="o">-&gt;</span> <span class="k">'</span><span class="n">a</span> <span class="n">t</span> <span class="o">-&gt;</span> <span class="k">'</span><span class="n">a</span> <span class="n">t</span>
<span class="k">let</span> <span class="n">examplemap</span> <span class="o">=</span> 
  <span class="nn">Map</span><span class="p">.</span><span class="n">empty</span> 
  <span class="o">|&gt;</span> <span class="nn">Map</span><span class="p">.</span><span class="n">add</span> <span class="s2">"foo"</span> <span class="bp">true</span>
  <span class="o">|&gt;</span> <span class="nn">Map</span><span class="p">.</span><span class="n">add</span> <span class="s2">"bar"</span> <span class="bp">true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Or, In Jane Street ‚Äúnamed-argument‚Äù style 
e.g. <a href="https://v1.realworldocaml.org/v1/en/html/maps-and-hash-tables.html">Real World OCaml</a></p>

<div class="language-ocaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="k">let</span> <span class="n">examplemap</span> <span class="o">=</span> 
  <span class="nn">Map</span><span class="p">.</span><span class="n">empty</span>
  <span class="o">|&gt;</span> <span class="nn">Map</span><span class="p">.</span><span class="n">add</span> <span class="o">~</span><span class="n">key</span><span class="o">:</span><span class="s2">"foo"</span> <span class="o">~</span><span class="n">data</span><span class="o">:</span><span class="bp">true</span>
  <span class="o">|&gt;</span> <span class="nn">Map</span><span class="p">.</span><span class="n">add</span> <span class="o">~</span><span class="n">key</span><span class="o">:</span><span class="s2">"bar"</span> <span class="o">~</span><span class="n">data</span><span class="o">:</span><span class="bp">true</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="lightweight-meta-programming-in-coq---notation">Lightweight Meta-Programming in Coq - Notation</h3>

<p>In Coq, we can leverage some meta programming:</p>

<div class="language-coq highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="k">Notation</span><span class="w"> </span><span class="s2">"'_' '!-&gt;' v"</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="o">(</span><span class="no">t_empty</span><span class="w"> </span><span class="no">v</span><span class="o">)</span><span class="w">
  </span><span class="o">(</span><span class="kp">at</span><span class="w"> </span><span class="no">level</span><span class="w"> </span><span class="mi">100</span><span class="o">,</span><span class="w"> </span><span class="no">right</span><span class="w"> </span><span class="no">associativity</span><span class="o">).</span><span class="w">

</span><span class="k">Notation</span><span class="w"> </span><span class="s2">"x '!-&gt;' v ';' m"</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="o">(</span><span class="no">t_update</span><span class="w"> </span><span class="no">m</span><span class="w"> </span><span class="no">x</span><span class="w"> </span><span class="no">v</span><span class="o">)</span><span class="w">
  </span><span class="o">(</span><span class="kp">at</span><span class="w"> </span><span class="no">level</span><span class="w"> </span><span class="mi">100</span><span class="o">,</span><span class="w"> </span><span class="no">v</span><span class="w"> </span><span class="kp">at</span><span class="w"> </span><span class="no">next</span><span class="w"> </span><span class="no">level</span><span class="o">,</span><span class="w"> </span><span class="no">right</span><span class="w"> </span><span class="no">associativity</span><span class="o">).</span><span class="w">

</span><span class="k">Definition</span><span class="w"> </span><span class="no">examplemap'</span><span class="w"> </span><span class="p">:=</span><span class="w">
  </span><span class="o">(</span><span class="w"> </span><span class="s2">"bar"</span><span class="w"> </span><span class="o">!-&gt;</span><span class="w"> </span><span class="no">true</span><span class="p">;</span><span class="w">
    </span><span class="s2">"foo"</span><span class="w"> </span><span class="o">!-&gt;</span><span class="w"> </span><span class="no">true</span><span class="p">;</span><span class="w">
    </span><span class="p">_</span><span class="w">     </span><span class="o">!-&gt;</span><span class="w"> </span><span class="no">false</span><span class="w">
  </span><span class="o">).</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>Noticed that the ‚ÄúMap building‚Äù is in a <em>reversed</em> order‚Ä¶</p>

<blockquote>
  <p>Note that we don‚Äôt need to define a find operation because it is just function application!</p>
</blockquote>

<div class="language-coq highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">Example</span><span class="w"> </span><span class="no">update_example2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">examplemap'</span><span class="w"> </span><span class="s2">"foo"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="pi">.</span><span class="w">
</span><span class="k">Example</span><span class="w"> </span><span class="no">update_example4</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">examplemap'</span><span class="w"> </span><span class="s2">"bar"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span><span class="pi">.</span><span class="w">
</span><span class="k">Example</span><span class="w"> </span><span class="no">update_example1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">examplemap'</span><span class="w"> </span><span class="s2">"baz"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">false</span><span class="pi">.</span><span class="w"> </span><span class="c">(* default *)</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<hr />

<h2 id="partial-maps">Partial Maps</h2>

<blockquote>
  <p>we define partial maps on top of total maps. 
A partial map with elements of type <code class="highlighter-rouge">A</code> is simply a total map with elements of type <code class="highlighter-rouge">option A</code> and default element <code class="highlighter-rouge">None</code>.</p>
</blockquote>

<div class="language-coq highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="k">Definition</span><span class="w"> </span><span class="no">partial_map</span><span class="w"> </span><span class="o">(</span><span class="no">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kr">Type</span><span class="o">)</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="no">total_map</span><span class="w"> </span><span class="o">(</span><span class="no">option</span><span class="w"> </span><span class="no">A</span><span class="o">).</span><span class="w">

</span><span class="k">Definition</span><span class="w"> </span><span class="no">empty</span><span class="w"> </span><span class="o">{</span><span class="no">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kr">Type</span><span class="o">}</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">partial_map</span><span class="w"> </span><span class="no">A</span><span class="w"> </span><span class="p">:=</span><span class="w">
  </span><span class="no">t_empty</span><span class="w"> </span><span class="no">None</span><span class="pi">.</span><span class="w">

</span><span class="k">Definition</span><span class="w"> </span><span class="no">update</span><span class="w"> </span><span class="o">{</span><span class="no">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kr">Type</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="no">m</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">partial_map</span><span class="w"> </span><span class="no">A</span><span class="o">)</span><span class="w">
           </span><span class="o">(</span><span class="no">x</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">string</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="no">v</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="no">A</span><span class="o">)</span><span class="w"> </span><span class="p">:=</span><span class="w">
  </span><span class="o">(</span><span class="no">x</span><span class="w"> </span><span class="o">!-&gt;</span><span class="w"> </span><span class="no">Some</span><span class="w"> </span><span class="no">v</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="no">m</span><span class="o">).</span><span class="w">
  
</span><span class="k">Notation</span><span class="w"> </span><span class="s2">"x '‚ä¢&gt;' v ';' m"</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="o">(</span><span class="no">update</span><span class="w"> </span><span class="no">m</span><span class="w"> </span><span class="no">x</span><span class="w"> </span><span class="no">v</span><span class="o">)</span><span class="w">
  </span><span class="o">(</span><span class="kp">at</span><span class="w"> </span><span class="no">level</span><span class="w"> </span><span class="mi">100</span><span class="o">,</span><span class="w"> </span><span class="no">v</span><span class="w"> </span><span class="kp">at</span><span class="w"> </span><span class="no">next</span><span class="w"> </span><span class="no">level</span><span class="o">,</span><span class="w"> </span><span class="no">right</span><span class="w"> </span><span class="no">associativity</span><span class="o">).</span><span class="w">

</span><span class="c">(** hide the empty case. Since it's always [None] **)</span><span class="w">
</span><span class="k">Notation</span><span class="w"> </span><span class="s2">"x '‚ä¢&gt;' v"</span><span class="w"> </span><span class="p">:=</span><span class="w"> </span><span class="o">(</span><span class="no">update</span><span class="w"> </span><span class="no">empty</span><span class="w"> </span><span class="no">x</span><span class="w"> </span><span class="no">v</span><span class="o">)</span><span class="w">
  </span><span class="o">(</span><span class="kp">at</span><span class="w"> </span><span class="no">level</span><span class="w"> </span><span class="mi">100</span><span class="o">).</span><span class="w">
  
</span><span class="c">(** so nice **)</span><span class="w">
</span><span class="k">Example</span><span class="w"> </span><span class="no">examplepmap</span><span class="w"> </span><span class="p">:=</span><span class="w">
  </span><span class="o">(</span><span class="s2">"Church"</span><span class="w"> </span><span class="err">‚ä¢</span><span class="o">&gt;</span><span class="w"> </span><span class="no">true</span><span class="w"> </span><span class="p">;</span><span class="w"> 
   </span><span class="s2">"Turing"</span><span class="w"> </span><span class="err">‚ä¢</span><span class="o">&gt;</span><span class="w"> </span><span class="no">false</span><span class="o">).</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>we use the ‚Äústandard‚Äù map operator <code class="highlighter-rouge">‚Ü¶</code> for partial map since maps in CS are usually partial.</p>

<hr />

<h2 id="maps-are-functions"><a href="https://en.wikipedia.org/wiki/Map_(mathematics)#Maps_as_functions">Maps are functions</a></h2>

<blockquote>
  <p>In many branches of mathematics, the term map is used to mean a function.
<em>partial map</em> = <em>partial function</em>, 
<em>total   map</em> = <em>total   function</em>.</p>
</blockquote>

<blockquote>
  <p>In category theory, ‚Äúmap‚Äù is often used as a synonym for morphism or arrow.</p>
</blockquote>

<blockquote>
  <p>In formal logic, ‚Äúmap‚Äù is sometimes used for a functional symbol.</p>
</blockquote>



                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2019/01/07/sf-lf-07-indprop/" data-toggle="tooltip" data-placement="top" title="„ÄåSF-LC„Äç7 Ind Prop">
                        Previous<br>
                        <span>„ÄåSF-LC„Äç7 Ind Prop</span>
                        </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2019/01/09/sf-lf-09-proof-object/" data-toggle="tooltip" data-placement="top" title="„ÄåSF-LC„Äç9 ProofObjects">
                        Next<br>
                        <span>„ÄåSF-LC„Äç9 ProofObjects</span>
                        </a>
                    </li>
                    
                </ul>
                <hr style="visibility: hidden;">

                
                <!-- disqus ËØÑËÆ∫Ê°Ü start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus ËØÑËÆ∫Ê°Ü end -->
                

                
            </div>  

    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        </a>
        
        
                <a data-sort="0065" 
                    href="/archive/?tag=%E7%9F%A5%E4%B9%8E"
                    title="Áü•‰πé"
                    rel="10">Áü•‰πé</a>
        
                <a data-sort="0036" 
                    href="/archive/?tag=%E7%AC%94%E8%AE%B0"
                    title="Á¨îËÆ∞"
                    rel="39">Á¨îËÆ∞</a>
        
                <a data-sort="0039" 
                    href="/archive/?tag=Coq"
                    title="Coq"
                    rel="36">Coq</a>
        
                <a data-sort="0039" 
                    href="/archive/?tag=SF+%28%E8%BD%AF%E4%BB%B6%E5%9F%BA%E7%A1%80%29"
                    title="SF (ËΩØ‰ª∂Âü∫Á°Ä)"
                    rel="36">SF (ËΩØ‰ª∂Âü∫Á°Ä)</a>
        
                <a data-sort="0056" 
                    href="/archive/?tag=PLF+%28%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%29"
                    title="PLF (ÁºñÁ®ãËØ≠Ë®ÄÂü∫Á°Ä)"
                    rel="19">PLF (ÁºñÁ®ãËØ≠Ë®ÄÂü∫Á°Ä)</a>
        
                <a data-sort="0056" 
                    href="/archive/?tag=Web"
                    title="Web"
                    rel="19">Web</a>
        
                <a data-sort="0059" 
                    href="/archive/?tag=LF+%28%E9%80%BB%E8%BE%91%E5%9F%BA%E7%A1%80%29"
                    title="LF (ÈÄªËæëÂü∫Á°Ä)"
                    rel="16">LF (ÈÄªËæëÂü∫Á°Ä)</a>
        
                <a data-sort="0068" 
                    href="/archive/?tag=UX%2FUI"
                    title="UX/UI"
                    rel="7">UX/UI</a>
        
                <a data-sort="0069" 
                    href="/archive/?tag=%E4%BA%A7%E5%93%81"
                    title="‰∫ßÂìÅ"
                    rel="6">‰∫ßÂìÅ</a>
        
                <a data-sort="0069" 
                    href="/archive/?tag=PWA"
                    title="PWA"
                    rel="6">PWA</a>
        
                <a data-sort="0071" 
                    href="/archive/?tag=JavaScript"
                    title="JavaScript"
                    rel="4">JavaScript</a>
        
                <a data-sort="0071" 
                    href="/archive/?tag=Slides"
                    title="Slides"
                    rel="4">Slides</a>
        
                <a data-sort="0072" 
                    href="/archive/?tag=%E7%94%9F%E6%B4%BB"
                    title="ÁîüÊ¥ª"
                    rel="3">ÁîüÊ¥ª</a>
        
                <a data-sort="0072" 
                    href="/archive/?tag=%E8%AF%91"
                    title="ËØë"
                    rel="3">ËØë</a>
        
                <a data-sort="0072" 
                    href="/archive/?tag=%E9%98%BF%E9%87%8C"
                    title="ÈòøÈáå"
                    rel="3">ÈòøÈáå</a>
        
                <a data-sort="0072" 
                    href="/archive/?tag=%F0%9F%87%AC%F0%9F%87%A7"
                    title="üá¨üáß"
                    rel="3">üá¨üáß</a>
        
                <a data-sort="0072" 
                    href="/archive/?tag=Vim"
                    title="Vim"
                    rel="3">Vim</a>
        
                <a data-sort="0073" 
                    href="/archive/?tag=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6"
                    title="ËÆ°ÁÆóÊú∫ÁßëÂ≠¶"
                    rel="2">ËÆ°ÁÆóÊú∫ÁßëÂ≠¶</a>
        
                <a data-sort="0073" 
                    href="/archive/?tag=%E8%AE%A1%E7%AE%97%E7%90%86%E8%AE%BA"
                    title="ËÆ°ÁÆóÁêÜËÆ∫"
                    rel="2">ËÆ°ÁÆóÁêÜËÆ∫</a>
        
                <a data-sort="0073" 
                    href="/archive/?tag=CSS"
                    title="CSS"
                    rel="2">CSS</a>
        
                <a data-sort="0073" 
                    href="/archive/?tag=Wechat"
                    title="Wechat"
                    rel="2">Wechat</a>
        
                <a data-sort="0073" 
                    href="/archive/?tag=hUX+%E9%9A%8F%E6%83%B3%E5%BD%95"
                    title="hUX ÈöèÊÉ≥ÂΩï"
                    rel="2">hUX ÈöèÊÉ≥ÂΩï
    </div>
</section>


                <!-- Friends Blog -->
                
<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
  <li><a href="http://mida.re/">‰π±Â∫è</a></li>
  
  <li><a href="http://qianduan.guru/">ÂâçÁ´ØÂ§ñÂàäËØÑËÆ∫</a></li>
  
  <li><a href="http://lingyu.wang/">Â§©Èï∂ÁöÑÂçöÂÆ¢</a></li>
  
  <li><a href="http://hmqk1995.github.io">Luke ÁöÑËá™ÁïôÂú∞</a></li>
  
  <li><a href="http://ebnbin.com/">Ebn's Blog</a></li>
  
  <li><a href="http://blog.smdcn.net">SmdCn's Blog</a></li>
  
  <li><a href="https://www.ruoyaowu.com/">David's Game</a></li>
  
  <li><a href="http://dhong.co">DHong Say</a></li>
  
  <li><a href="http://ingf.github.io/">Â∞πÂ≥∞‰ª•‰∏∫</a></li>
  
  <li><a href="http://xieminis.me/">Ëß£ÊóªÁöÑÂçöÂÆ¢</a></li>
  
</ul>

            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->






<!-- disqus ÂÖ¨ÂÖ±JS‰ª£Á†Å start (‰∏Ä‰∏™ÁΩëÈ°µÂè™ÈúÄÊèíÂÖ•‰∏ÄÊ¨°) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "hux";
    var disqus_identifier = "/2019/01/08/sf-lf-08-map";
    var disqus_url = "http://localhost:4000/2019/01/08/sf-lf-08-map/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus ÂÖ¨ÂÖ±JS‰ª£Á†Å end -->




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'right',
          // icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  <li>
    <a href="https://twitter.com/huxpro">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://www.zhihu.com/people/huxpro">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa  fa-stack-1x fa-inverse">Áü•</i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="http://weibo.com/huxpro">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  
  <li>
    <a target="_blank" href="https://github.com/huxpro">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; lxd's Blog 2019
                    <br>
                    Powered by <a href="http://huangxuan.me">Hux Blog</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->





<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->

<script>
    // dynamic User by Hux
    var _gaId = 'UA-49627206-1';
    var _gaDomain = 'huangxuan.me';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>



<!-- Baidu Tongji -->



<!-- Side Catalog -->



<!-- Multi-Lingual -->




<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
